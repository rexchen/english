(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function c(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(e){if(e.ep)return;e.ep=!0;const i=c(e);fetch(e.href,i)}})();const M=["ace","actor","almond","alphabet","amount","arrow","article","badger","barber","basic","battle","beginner","bind","borrow","bother","cactus","cartoon","center","checkers","chimney","claim","clerk","click","cliff","clue","cocoon","control","corner","cue","daydream","disk","drill","dust","enemy","equal","erase","example","field","firefly","fireworks","firm","flash","flight","fresh","giant","grand","harbor","haunt","history","hungry","iron","island","jellyfish","knight","know-how","ladybird","lighthouse","lonely","maple","meter","middle","mole","narrow","offer","onion","period","plain","powerful","pretend","pride","recess","record","result","rude","season","settle","share","speech","steak","steel","Stone Age","strawberry","success","sundown","sunlit","sunrise","supper","telephone","thirsty","thread","toilet","total","trash","value","vote","wasp","wildcat","willow","yourself","youth"],T={zh:"çŽ‹ç‰Œ",ipa:"/eÉªs/"},U={zh:"æ¼”å“¡",ipa:"/ËˆÃ¦ktÉ™r/"},J={zh:"æä»",ipa:"/ËˆÉ‘ËmÉ™nd/"},P={zh:"å­—æ¯è¡¨",ipa:"/ËˆÃ¦lfÉ™bet/"},H={zh:"æ•¸é‡",ipa:"/É™ËˆmaÊŠnt/"},R={zh:"ç®­",ipa:"/ËˆÃ¦rÉ™ÊŠ/"},V={zh:"æ–‡ç« ",ipa:"/ËˆÉ‘ËrtÉªkl/"},_={zh:"ç¾",ipa:"/ËˆbÃ¦dÊ’É™r/"},q={zh:"ç†é«®å¸«",ipa:"/ËˆbÉ‘ËrbÉ™r/"},D={zh:"åŸºæœ¬çš„",ipa:"/ËˆbeÉªsÉªk/"},F={zh:"æˆ°é¬¥",ipa:"/ËˆbÃ¦tl/"},G={zh:"åˆå­¸è€…",ipa:"/bÉªËˆÉ¡ÉªnÉ™r/"},Y={zh:"æ†ç¶",ipa:"/baÉªnd/"},K={zh:"å€Ÿå…¥",ipa:"/ËˆbÉ”ËrÉ™ÊŠ/"},X={zh:"æ‰“æ“¾",ipa:"/ËˆbÉ‘ËÃ°É™r/"},Q={zh:"ä»™äººæŽŒ",ipa:"/ËˆkÃ¦ktÉ™s/"},Z={zh:"å¡é€š",ipa:"/kÉ‘ËrËˆtuËn/"},tt={zh:"ä¸­å¿ƒ",ipa:"/ËˆsentÉ™r/"},et={zh:"è·³æ£‹",ipa:"/ËˆtÊƒekÉ™rz/"},nt={zh:"ç…™å›ª",ipa:"/ËˆtÊƒÉªmni/"},ot={zh:"è²ç¨±",ipa:"/kleÉªm/"},st={zh:"åº—å“¡",ipa:"/klÉœËrk/"},it={zh:"é»žæ“Š",ipa:"/klÉªk/"},at={zh:"æ‡¸å´–",ipa:"/klÉªf/"},rt={zh:"ç·šç´¢",ipa:"/kluË/"},ct={zh:"ç¹­",ipa:"/kÉ™ËˆkuËn/"},lt={zh:"æŽ§åˆ¶",ipa:"/kÉ™nËˆtroÊŠl/"},dt={zh:"è§’è½",ipa:"/ËˆkÉ”ËrnÉ™r/"},ht={zh:"æç¤º",ipa:"/kjuË/"},pt={zh:"ç™½æ—¥å¤¢",ipa:"/ËˆdeÉªdriËm/"},ut={zh:"ç£ç›¤",ipa:"/dÉªsk/"},mt={zh:"é‘½å­”",ipa:"/drÉªl/"},ft={zh:"ç°å¡µ",ipa:"/dÊŒst/"},gt={zh:"æ•µäºº",ipa:"/ËˆenÉ™mi/"},zt={zh:"å¹³ç­‰çš„",ipa:"/ËˆiËkwÉ™l/"},wt={zh:"æ“¦é™¤",ipa:"/ÉªËˆreÉªs/"},yt={zh:"ä¾‹å­",ipa:"/ÉªÉ¡ËˆzÃ¦mpl/"},kt={zh:"ç”°é‡Ž",ipa:"/fiËld/"},bt={zh:"èž¢ç«èŸ²",ipa:"/ËˆfaÉªÉ™rflaÉª/"},vt={zh:"ç…™ç«",ipa:"/ËˆfaÉªÉ™rwÉœËrks/"},Et={zh:"å…¬å¸",ipa:"/fÉœËrm/"},Lt={zh:"é–ƒå…‰",ipa:"/flÃ¦Êƒ/"},Bt={zh:"é£›è¡Œ",ipa:"/flaÉªt/"},St={zh:"æ–°é®®çš„",ipa:"/freÊƒ/"},xt={zh:"å·¨äºº",ipa:"/ËˆdÊ’aÉªÉ™nt/"},It={zh:"å®å‰çš„",ipa:"/É¡rÃ¦nd/"},$t={zh:"æ¸¯å£",ipa:"/ËˆhÉ‘ËrbÉ™r/"},Ot={zh:"å‡ºæ²’",ipa:"/hÉ”Ënt/"},At={zh:"æ­·å²",ipa:"/ËˆhÉªstri/"},Wt={zh:"é£¢é¤“çš„",ipa:"/ËˆhÊŒÅ‹É¡ri/"},Nt={zh:"éµ",ipa:"/ËˆaÉªÉ™rn/"},jt={zh:"å³¶å¶¼",ipa:"/ËˆaÉªlÉ™nd/"},Ct={zh:"æ°´æ¯",ipa:"/ËˆdÊ’elifÉªÊƒ/"},Mt={zh:"é¨Žå£«",ipa:"/naÉªt/"},Tt={zh:"ç“¢èŸ²",ipa:"/ËˆleÉªdibÉœËrd/"},Ut={zh:"ç‡ˆå¡”",ipa:"/ËˆlaÉªthaÊŠs/"},Jt={zh:"å¯‚å¯žçš„",ipa:"/ËˆloÊŠnli/"},Pt={zh:"æ¥“æ¨¹",ipa:"/ËˆmeÉªpl/"},Ht={zh:"ç±³",ipa:"/ËˆmiËtÉ™r/"},Rt={zh:"ä¸­é–“",ipa:"/ËˆmÉªdl/"},Vt={zh:"é¼´é¼ ",ipa:"/moÊŠl/"},_t={zh:"ç‹¹çª„çš„",ipa:"/ËˆnÃ¦roÊŠ/"},qt={zh:"æä¾›",ipa:"/ËˆÉ”ËfÉ™r/"},Dt={zh:"æ´‹è”¥",ipa:"/ËˆÊŒnjÉ™n/"},Ft={zh:"æ™‚æœŸ",ipa:"/ËˆpÉªriÉ™d/"},Gt={zh:"å¹³åŽŸ",ipa:"/pleÉªn/"},Yt={zh:"å¼·å¤§çš„",ipa:"/ËˆpaÊŠÉ™rfÉ™l/"},Kt={zh:"å‡è£",ipa:"/prÉªËˆtend/"},Xt={zh:"é©•å‚²",ipa:"/praÉªd/"},Qt={zh:"ä¼‘æ¯",ipa:"/ËˆriËses/"},Zt={zh:"è¨˜éŒ„",ipa:"/ËˆrekÉ™rd/"},te={zh:"çµæžœ",ipa:"/rÉªËˆzÊŒlt/"},ee={zh:"ç²—é­¯çš„",ipa:"/ruËd/"},ne={zh:"å­£ç¯€",ipa:"/ËˆsiËzn/"},oe={zh:"å®šå±…",ipa:"/Ëˆsetl/"},se={zh:"åˆ†äº«",ipa:"/Êƒer/"},ie={zh:"æ¼”è¬›",ipa:"/spiËtÊƒ/"},ae={zh:"ç‰›æŽ’",ipa:"/steÉªk/"},re={zh:"é‹¼éµ",ipa:"/stiËl/"},ce={zh:"è‰èŽ“",ipa:"/ËˆstrÉ”Ëberi/"},le={zh:"æˆåŠŸ",ipa:"/sÉ™kËˆses/"},de={zh:"æ—¥è½",ipa:"/ËˆsÊŒndaÊŠn/"},he={zh:"é™½å…‰ç…§å°„çš„",ipa:"/ËˆsÊŒnlÉªt/"},pe={zh:"æ—¥å‡º",ipa:"/ËˆsÊŒnraÉªz/"},ue={zh:"æ™šé¤",ipa:"/ËˆsÊŒpÉ™r/"},me={zh:"é›»è©±",ipa:"/ËˆtelÉªfoÊŠn/"},fe={zh:"å£æ¸´çš„",ipa:"/ËˆÎ¸ÉœËrsti/"},ge={zh:"ç·š",ipa:"/Î¸red/"},ze={zh:"å»æ‰€",ipa:"/ËˆtÉ”ÉªlÉ™t/"},we={zh:"ç¸½è¨ˆ",ipa:"/ËˆtoÊŠtl/"},ye={zh:"åžƒåœ¾",ipa:"/trÃ¦Êƒ/"},ke={zh:"åƒ¹å€¼",ipa:"/ËˆvÃ¦ljuË/"},be={zh:"æŠ•ç¥¨",ipa:"/voÊŠt/"},ve={zh:"é»ƒèœ‚",ipa:"/wÉ‘Ësp/"},Ee={zh:"é‡Žè²“",ipa:"/ËˆwaÉªldkÃ¦t/"},Le={zh:"æŸ³æ¨¹",ipa:"/ËˆwÉªloÊŠ/"},Be={zh:"ä½ è‡ªå·±",ipa:"/jÉ”ËrËˆself/"},Se={zh:"é’å¹´",ipa:"/juËÎ¸/"},xe={ace:T,actor:U,almond:J,alphabet:P,amount:H,arrow:R,article:V,badger:_,barber:q,basic:D,battle:F,beginner:G,bind:Y,borrow:K,bother:X,cactus:Q,cartoon:Z,center:tt,checkers:et,chimney:nt,claim:ot,clerk:st,click:it,cliff:at,clue:rt,cocoon:ct,control:lt,corner:dt,cue:ht,daydream:pt,disk:ut,drill:mt,dust:ft,enemy:gt,equal:zt,erase:wt,example:yt,field:kt,firefly:bt,fireworks:vt,firm:Et,flash:Lt,flight:Bt,fresh:St,giant:xt,grand:It,harbor:$t,haunt:Ot,history:At,hungry:Wt,iron:Nt,island:jt,jellyfish:Ct,knight:Mt,"know-how":{zh:"æŠ€èƒ½",ipa:"/ËˆnoÊŠ haÊŠ/"},ladybird:Tt,lighthouse:Ut,lonely:Jt,maple:Pt,meter:Ht,middle:Rt,mole:Vt,narrow:_t,offer:qt,onion:Dt,period:Ft,plain:Gt,powerful:Yt,pretend:Kt,pride:Xt,recess:Qt,record:Zt,result:te,rude:ee,season:ne,settle:oe,share:se,speech:ie,steak:ae,steel:re,"Stone Age":{zh:"çŸ³å™¨æ™‚ä»£",ipa:"/ËˆstoÊŠn eÉªdÊ’/"},strawberry:ce,success:le,sundown:de,sunlit:he,sunrise:pe,supper:ue,telephone:me,thirsty:fe,thread:ge,toilet:ze,total:we,trash:ye,value:ke,vote:be,wasp:ve,wildcat:Ee,willow:Le,yourself:Be,youth:Se};document.addEventListener("DOMContentLoaded",()=>{let p=[],l=xe,c=JSON.parse(localStorage.getItem("vocab_known"))||[],o=JSON.parse(localStorage.getItem("vocab_unknown"))||[],e=[];const i=document.getElementById("card-container"),d=document.getElementById("unknown-btn"),B=document.getElementById("known-btn"),S=document.getElementById("speak-btn"),x=document.getElementById("stats-btn"),I=document.getElementById("settings-btn"),g=document.getElementById("stats-modal"),u=document.getElementById("settings-modal"),$=document.querySelectorAll(".close-modal"),O=document.getElementById("json-upload"),A=document.getElementById("reset-progress"),W=document.getElementById("known-count"),N=document.getElementById("unknown-count"),j=document.getElementById("unknown-list");C();async function C(){try{await m(),y()}catch(t){console.error("Initialization failed:",t),i.innerHTML="<p>Error loading data. Please refresh.</p>"}}async function m(t=null){t?p=t:p=M,e=p.filter(n=>!c.includes(n)),e.length>0?z(e[0]):b()}function z(t){if(!t)return;const n=l[t]||{zh:"...",ipa:""},s=`https://image.pollinations.ai/prompt/${t}%20fantasy%20art%20illustration%20magic%20the%20gathering%20style?width=400&height=300&nologo=true`,a=`
            <div class="card" id="current-card">
                <div class="mtg-frame">
                    <div class="mtg-inner-border">
                        <!-- Title Bar -->
                        <div class="mtg-title-bar">
                            <span class="mtg-title">${t}</span>
                            <div class="mtg-mana-cost" onclick="document.getElementById('speak-btn').click()">
                                <span class="material-icons-round" style="font-size: 16px; color: #333;">volume_up</span>
                            </div>
                        </div>

                        <!-- Art -->
                        <div class="mtg-art-container">
                            <img src="${s}" alt="${t}" class="mtg-art" onerror="this.src='https://placehold.co/400x300?text=${t}'">
                        </div>

                        <!-- Type Line -->
                        <div class="mtg-type-line">
                            <span class="mtg-type-text">Artifact â€¢ ${n.ipa||"/.../"}</span>
                            <div class="mtg-set-icon"></div>
                        </div>

                        <!-- Text Box -->
                        <div class="mtg-text-box">
                            <p class="mtg-definition">${n.zh}</p>
                            <div class="mtg-flavor-text">
                                "The meaning of this word is ancient and powerful."
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Bottom Info (Outside Frame) -->
                <div class="mtg-bottom-info">
                    <span>001/100 R</span>
                    <span>â„¢ & Â© 2025 VocabGram</span>
                </div>
            </div>
        `;if(i.innerHTML=a,e.length>1){const r=e[1],k=new Image;k.src=`https://image.pollinations.ai/prompt/${r}%20fantasy%20art%20illustration%20magic%20the%20gathering%20style?width=400&height=300&nologo=true`}}function f(t){const n=e[0];if(!n)return;const s=document.getElementById("current-card"),a=t==="known"?100:-100,r=t==="known"?20:-20;s.style.transform=`translate(${a}%, -20px) rotate(${r}deg)`,s.style.opacity="0",setTimeout(()=>{t==="known"?c.includes(n)||(c.push(n),o=o.filter(k=>k!==n)):o.includes(n)||o.push(n),w(),e.shift(),e.length>0?z(e[0]):b(),y()},300)}function b(){const t=o.length>0,n=t?`You have ${o.length} words to review.`:"You've mastered all the words!",s=t?`<button id="review-btn" class="action-btn" style="width: auto; padding: 0 24px; border-radius: 24px; background: var(--primary-color); color: white; font-weight: 600;">
                 Review ${o.length} Words
               </button>`:`<button id="reset-all-btn" class="action-btn" style="width: auto; padding: 0 24px; border-radius: 24px; background: var(--text-main); color: white; font-weight: 600;">
                 Start Over
               </button>`;i.innerHTML=`
            <div class="card-content">
                <h2>All Caught Up! ðŸŽ‰</h2>
                <p style="margin-bottom: 24px; color: var(--text-secondary);">${n}</p>
                ${s}
            </div>
        `,t?document.getElementById("review-btn").addEventListener("click",()=>{v()}):document.getElementById("reset-all-btn").addEventListener("click",()=>{confirm("Reset all progress and start over?")&&(c=[],o=[],w(),m())})}function v(){if(o.length===0){alert("No unknown words to review!");return}e=[...o],e.sort(()=>Math.random()-.5),z(e[0]),g.classList.add("hidden")}let h=null;function E(){const t=window.speechSynthesis.getVoices(),n=["Google US English","Samantha","Microsoft David","Alex"];for(const s of n){const a=t.find(r=>r.name.includes(s)&&r.lang.startsWith("en"));if(a){h=a;break}}h||(h=t.find(s=>s.lang==="en-US"))}window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=E),E();function L(){const t=e[0];if(t){window.speechSynthesis.cancel();const n=new SpeechSynthesisUtterance(t);n.lang="en-US",n.rate=.9,h&&(n.voice=h),window.speechSynthesis.speak(n)}}function w(){localStorage.setItem("vocab_known",JSON.stringify(c)),localStorage.setItem("vocab_unknown",JSON.stringify(o))}function y(){var n;W.textContent=c.length,N.textContent=o.length;const t=o.length>0?`<button id="practice-unknown-btn" style="width: 100%; padding: 12px; margin-bottom: 16px; background: var(--primary-color); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                 Practice ${o.length} Unknown Words
               </button>`:"";j.innerHTML=t+o.map(s=>{var a;return`
            <li>
                <span>${s}</span>
                <span style="color: #888;">${((a=l[s])==null?void 0:a.zh)||""}</span>
            </li>
        `}).join(""),o.length>0&&((n=document.getElementById("practice-unknown-btn"))==null||n.addEventListener("click",v))}B.addEventListener("click",()=>f("known")),d.addEventListener("click",()=>f("unknown")),S.addEventListener("click",L),document.addEventListener("keydown",t=>{t.key==="ArrowRight"&&f("known"),t.key==="ArrowLeft"&&f("unknown"),(t.key===" "||t.key==="ArrowUp")&&L()}),x.addEventListener("click",()=>{y(),g.classList.remove("hidden")}),I.addEventListener("click",()=>u.classList.remove("hidden")),$.forEach(t=>{t.addEventListener("click",()=>{g.classList.add("hidden"),u.classList.add("hidden")})}),A.addEventListener("click",()=>{confirm("Are you sure you want to reset all progress?")&&(c=[],o=[],w(),m(),u.classList.add("hidden"))}),O.addEventListener("change",t=>{const n=t.target.files[0];if(n){const s=new FileReader;s.onload=a=>{try{const r=JSON.parse(a.target.result);Array.isArray(r)?(m(r),u.classList.add("hidden"),alert("Custom list loaded!")):alert("Invalid JSON format. Expected an array of strings.")}catch{alert("Error parsing JSON")}},s.readAsText(n)}})});
